## 本日の目標
- Route 53 概要
- 名前解決の流れ
- ホストゾーン
- DNSレコード
- フェイルオーバールーティング
- ルーティングポリシー

## 学んだこと（新しい気付き、学び）

### Route 53
#### WHAT：それは何？
- AWSが提供するフルマネージド型のDNSサービス。
- ドメイン名をIPアドレスに変換する。
- DNS管理、ドメイン登録、トラフィックルーティングを一括管理。

#### WHY：なぜ必要？なぜ大事？
- Webアプリやサービスへのアクセスを簡単にする。
- トラフィックを効率的に管理して、高いパフォーマンスと可用性を実現。
- 独自ドメインの登録やセキュアな通信環境を提供。

#### WHEN：いつ使う？
- 独自ドメインを利用するWebサイトやアプリを構築するとき。
- 地理的ルーティングやフェイルオーバー構成を実現するとき。
- トラフィックを特定の条件でコントロールしたいとき。

#### HOW：どのように使う？
1. **ドメイン登録**：
   - Route 53で新規ドメインを購入。
   - 他のレジストラで登録済みのドメインを移管することも可能。

2. **ホストゾーン作成**：
   - 管理したいドメインのホストゾーンを作成。
   - 公開ゾーン（パブリックDNS）やプライベートゾーン（VPC内での利用）を選べる。

3. **DNSレコードの設定**：
   - ドメイン名に対するDNSレコード（A、CNAME、MX、TXTなど）を作成。
   - 例：`www.example.com` を特定のWebサーバーIPに紐づける。

4. **トラフィックルーティングの設定**：
   - ルーティングポリシーを活用して柔軟なトラフィック管理。
     - **シンプルルーティング**：単一リソースへのルーティング。
     - **加重ルーティング**：複数リソース間でトラフィックを分割。
     - **位置情報ルーティング**：ユーザーの位置に応じたルーティング。
     - **フェイルオーバールーティング**：障害時にバックアップリソースへ切り替え。

5. **高可用性の設定**：
   - ヘルスチェックを設定してリソースの状態を監視。
   - 健全なリソースにのみトラフィックを送る。

6. 主な特徴：
  - ドメイン登録やDNSSEC（セキュアDNS）対応。
  - グローバルエニーキャストネットワークで低遅延と高可用性を提供。
  - VPCでプライベートDNSを使用可能。

7. 注意点：
  - レコードの変更は伝播時間が必要（最大48時間）。
  - ホストゾーンIDやドメイン設定ミスに注意。


### ルーティングポリシー（Route 53の構成要素）
#### WHAT：それは何？
- Route 53が提供する**トラフィックの振り分け方法を制御する仕組み**。
- ドメイン名にアクセスしたユーザーを適切なリソースに導く。

#### WHY：なぜ必要？なぜ大事？
- サービスの可用性やパフォーマンスを最適化するため。
- 地域や状況に応じてトラフィックを柔軟に制御可能。
- フェイルオーバーやロードバランシングを実現。

#### WHEN：いつ使う？
- 特定の条件に基づいてトラフィックを分散させたいとき。
- アプリの多地域展開やバックアップシステムを利用するとき。
- 高い可用性やパフォーマンスを求めるサービスを構築するとき。

#### HOW：どのように使う？
1. **シンプルルーティング**：
   - 単一のリソースにトラフィックを送る。
   - 例：固定のEC2インスタンスやELB。

2. **フェイルオーバールーティング**：
   - プライマリリソースがダウンした場合、バックアップに切り替える。
   - ヘルスチェックと連携。

3. **加重ルーティング**：
   - リソースごとにトラフィックの割合を設定。
   - 例：Aサーバーに70%、Bサーバーに30%。

4. **位置情報ルーティング**：
   - ユーザーの位置に基づいてトラフィックをルーティング。
   - 例：日本のユーザーを東京リージョンへ、アメリカのユーザーをオレゴンリージョンへ。

5. **レイテンシールーティング**：
   - 遅延が最も少ないリソースにトラフィックを振り分ける。
   - グローバルサービスで高速化したいときに有効。

7. **複数値回答ルーティング**：
   - 複数のリソースの中から、ヘルスチェックに合格したIPアドレスをランダムに返すルーティング。
   - シンプルルーティングの代替として利用。

### ホストゾーン（Route 53の構成要素）
#### WHAT：それは何？
- DNSレコードを管理するための**領域・コンテナ**。
- ドメイン名とその関連設定を集約する場所。

#### WHY：なぜ必要？なぜ大事？
- ドメイン名のルーティング設定を一元管理できる。
- サービスごとに異なる設定を整理しやすい。
- DNSの設定を簡単に変更・追加できる。

#### WHEN：いつ使う？
- ドメインをRoute 53で管理したいとき。
- サブドメインやDNSレコードを設定・管理したいとき。
- トラフィックを特定のリソースにルーティングしたいとき。

#### HOW：どのように使う？
1. **ホストゾーンの種類**：
   - **パブリックホストゾーン**：
     - インターネット上で公開されるドメイン名を管理。
     - 例：`example.com`。
   - **プライベートホストゾーン**：
     - VPC内でのみ使用されるDNS設定を管理。
     - 例：内部サービス用のドメイン名。

2. **設定手順**：
   - AWSコンソールで新しいホストゾーンを作成。
   - 必要なDNSレコードを追加（Aレコード、CNAMEなど）。

3. 注意点：
  - パブリックホストゾーンの場合、ドメイン名をRoute 53に登録する必要がある。
  - プライベートホストゾーンを使う場合、VPCと関連付ける設定が必要。
  - 設定ミスはDNSエラーやトラフィック障害を引き起こす可能性があるので注意。

| ホストゾーンの種類	| 設定が必要なもの |	理由 |
|------------------|-------------------------------|------------------------|
| パブリックホストゾーン | ドメイン名の登録 & NSレコードの設定	| インターネットに公開するため |
| プライベートホストゾーン | VPCとの関連付け | VPC内でのみDNSを解決するため |

### レコードの種類
| 用語          | 説明 |
|--------------|------------------------------------------------------|
| Aliasレコード | Route 53固有のレコード。S3バケットやCloudFrontなどAWSリソースのエンドポイントを指定できる。無料で利用可能。 |
| Aレコード    | ドメイン名をIPv4アドレスに紐づけるレコード。例: `example.com → 192.0.2.1` |
| AAAAレコード | ドメイン名をIPv6アドレスに紐づけるレコード。例: `example.com → 2001:db8::1` |
| NSレコード   | 対象となるドメインのネームサーバー（ドメイン情報を管理するDNSサーバー名）が記載されているレコード。AWSでは、自動で作成される。 |
| SOAレコード  | プライマリ権威（信頼性・正確性）DNSサーバーの管理情報を保持するレコード。 SOAは、Start Of Authorityの略。AWSでは、自動で作成される。 |
| CNAMEレコード | 別のドメイン名に転送するレコード。例: `www.example.com → example.com`　canonical name record。別名に対する正式名を指定するためのレコード。|



## 本日の感想
- DNS関連、中々頭がこんがらがる。
  
## 明日の目標（TODO 目標/できるようになりたいこと）
- AWS
- etc

## 学習時間
- today 4h
- month 48h52min
- total 48h52min
